{% extends 'base.html' %}
{% load static %}
{% block title %}Categories{% endblock title %}
{% block page-css %}<link rel="stylesheet" href="{% static 'css/categories.css' %}">{% endblock page-css %}

{% block content %}

<div id='top'></div>
<div class='container my-5'>
    <div class='row my-5'>
        <h1 class='text-center bold'>LEARN MORE</h1> 
        <h5 class='text-center mb-5'><i>Learn all you ever wanted to know about each category</i></h5>
        <div class='col-lg-6 p-3'>
            <article>
                <h5 class='mb-3 text-center'>SPIRIT CATEGORIES</h5>
                <p>
                    Learn more about each spirits category. Per category you can find a list of brands, bottles and articles related to each category.
                </p>
                <p class='my-5'>
                    All categories are displayed in their global categories. 
                    <br>
                    If you like, you can also display categories like Whisky <i>(Scotch, Bourbon, Rye, Malt, World)</i> or Agave <i>(Tequila, Mezcal, Raicilla, Bacanora)</i> split out into their subcategories.
                </p>
            </article>    
        </div>
        <img class='main col-lg-6 p-3' src="{{image.image.url}}" alt="{{image.name}}" title="{{image.name}}" loading='lazy'>
    </div>
    <div class='container my-5'>
        <div    class='d-flex flex-column text-center'
                hx-boost="true">
            <a  hx-get='{% url "Academy:category_global" %}'
            hx-trigger='click'
            hx-target='#categories'
            hx-swap='outerhtml'
            hx-push-url="true">
            <h2 class='button'>GLOBAL CATEGORIES</h2>
            </a>
            <a  hx-get='{% url "Academy:categories" %}'
            hx-trigger='click'
            hx-target='#categories'
            hx-swap='outerhtml'
            hx-push-url="true">
            <h2 class='button'>SUB CATEGORIES</h2>
            </a>
        </div>
    </div>
</div>
<div class='container my-5 categories' id='categories'>
    <div class='row d-flex justify-content-center slow-load' hx-boost="true">
        {% for category in categories  %}
        {% ifchanged category.name %}
        <div class="{% cycle 'col-md-6' 'col-md-6' 'col-md-12' %} my-2 d-flex justify-content-center category-tile">
            <a  class='category-link' 
                {% if category.subcategory %}
                hx-get="{% url 'Academy:category_global_filtered' object=category.name %}"
                hx-trigger='click'
                hx-target='#categories'
                hx-swap='outerhtml'
                hx-push-url='true'
                {% else %}
                href="{{category.get_absolute_url}}"
                {% endif %}>
                <div class="{% cycle 'row' 'rowreverse' %}">
                    <div class='col-6'>
                        <h1 class='mt-3 text-center'>{{category.name | upper}}</h1>
                        <p>{{category.tagline | safe}}</p>
                    </div>
                    <img class='category-logo col-6' src="{{category.logo.url}}" alt="Logo of category" title="Logo of {{category.name}}">
                </div>
                
                
            </a>
        </div>
        {% endifchanged %}
        {% endfor %}
    </div>

</div>

{% endblock content %}