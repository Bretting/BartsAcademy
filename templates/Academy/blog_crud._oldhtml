{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block title %}Barts Academy - CRUD admin{% endblock title %}
{% block page-css %}<link rel="stylesheet" href="{% static 'css/forms.css' %}"> {{blog_form.media}} {% endblock page-css %}

{% block content %}

<div class='container'> 
    <div class='row form'>
        <h1 class='text-center my-5'>Add & Update</h1>
        <h3 class='text-center my-2'>Blog</h3>
       {% if message %}
            <div> 
                <div><h2>{{message}}</h2></div>
                <div class='d-flex justify-content-center'><a href="{{object.get_absolute_url}}"><h2 class='button'>Check {% if object.subcategory %}{{object.subcategory}}{% elif object.brand %}{{object.brand}} - {{object.name}} {% else %}{{object.name}}{% endif %}</h2></a></div>
            </div>
        
       {% endif %}

       <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ formset.management_form }}
        <div class='row form-row my-3'>
          <h3>{{blog_form.name.label}}</h3>
          {{blog_form.name}}
        </div>

        <div class='row form-row my-3'>
          <h3>{{blog_form.teaser.label}}<h3>
          {{blog_form.teaser}}
        </div>

        <div class='row form-row form-control-file my-3'>
          <h3>{{blog_form.hero_image.label}}<h3>
          {{blog_form.hero_image}}
        </div>

        <div class='row form-row my-3'>
          <h3>{{blog_form.text.label}}<h3>
          {{blog_form.text}}
        </div>
        
        <div class='row form-row form-control-file my-3'>
          <h3>{{blog_form.video.label}}<h3>
          {{blog_form.video}}
        </div>
        <div class='row my-3'>
          <div class='col-4 px-2'>
            <h3>{{blog_form.category_tag.label}}</h3>
            {{blog_form.category_tag}}
          </div>
          <div class='col-4 px-2'>
            <h3>{{blog_form.brand_tag.label}}</h3>
            {{blog_form.brand_tag}}
          </div>
          <div class='col-4 px-2'>
            <h3>{{blog_form.bottle_tag.label}}</h3>
            {{blog_form.bottle_tag}}
          </div>
        </div>
        
        
        
        <div class="formset mt-5" id='formset'>
          <h2>Add image gallery</h2>
          

          {% for form in formset %}
          <div class='image-form'>
            <i>{{form.errors}}</i>
            <div class='row form-row mt-2'>{{ form.image }}</div>
            <div class='row form-row mb-2'>{{ form.text }}</div>
          </div>
          {% endfor %}


          <button id='add-form' class='my-5 btn btn-secondary text-center' type="button">Add</button>        
        </div>

        <div class='text-center mt-5'>
          <button class='my-5 btn btn-secondary' type="submit">Save</button>        
        </div>

      </form>

      
    </div>
</div>


{% endblock content %} 